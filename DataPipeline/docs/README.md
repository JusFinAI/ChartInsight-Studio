# ChartInsight Studio - DataPipeline ë¬¸ì„œ ì„¼í„°

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-31  
**í”„ë¡œì íŠ¸ ë²„ì „**: DataPipeline v7.1  
**ë¬¸ì„œ ë²„ì „**: 2.0

---

## ğŸ“‹ Quick Navigation

- [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
- [ë¬¸ì„œ êµ¬ì¡°](#ë¬¸ì„œ-êµ¬ì¡°)
- [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
- [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
- [ì£¼ìš” ì„±ê³¼](#ì£¼ìš”-ì„±ê³¼)
- [ë³´ê´€ ë¬¸ì„œ](#ë³´ê´€-ë¬¸ì„œ)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

**ChartInsight Studio DataPipeline**ì€ **TRADING LAB ì„œë¹„ìŠ¤**ë¥¼ ìœ„í•œ ì™„ì „ ìë™í™”ëœ ì£¼ì‹ ë°ì´í„° ìˆ˜ì§‘ ë° ë¶„ì„ íŒŒì´í”„ë¼ì¸ì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥

ë§¤ì¼ ìë™ìœ¼ë¡œ:
- ğŸ“Š **ë°ì´í„° ìˆ˜ì§‘**: 1,400ê°œ ì¢…ëª©ì˜ OHLCV ë°ì´í„° (ì¼/ì£¼/ì›”ë´‰, ë¶„ë´‰)
- ğŸ“ˆ **ìƒëŒ€ê°•ë„ ê³„ì‚°**: Market RS, Sector RS ì ìˆ˜
- ğŸ’¼ **ì¬ë¬´ ë¶„ì„**: DART API ê¸°ë°˜ ê¸°ì—… ì¬ë¬´ ë“±ê¸‰
- ğŸ” **ê¸°ìˆ ì  ë¶„ì„**: ì´ë™í‰ê· ì„ , RSI ë“± ê¸°ìˆ  ì§€í‘œ
- ğŸ’¾ **ê²°ê³¼ ì €ì¥**: `daily_analysis_results` í…Œì´ë¸”ì— í†µí•© ì €ì¥

### í”„ë¡œì íŠ¸ ë¹„ì „

**"ì˜¤ëŠ˜ ì£¼ëª©í•´ì•¼ í•  ì¢…ëª©ì„ ìë™ìœ¼ë¡œ ì°¾ì•„ì£¼ëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸"**

---

## ğŸ“š ë¬¸ì„œ êµ¬ì¡°

### ğŸ”´ í•µì‹¬ í”„ë¡œì íŠ¸ ë¬¸ì„œ (ì´ í´ë”)

| ë¬¸ì„œ | ëª©ì  | ëŒ€ìƒ |
|------|------|------|
| **`DataPipeline_Project_Roadmap.md`** | í”„ë¡œì íŠ¸ ì „ì²´ ë¡œë“œë§µ ë° í˜„í™© | ëª¨ë“  ì‚¬ìš©ì â­ |

### ğŸŸ  ìµœì¢… ë³´ê³ ì„œ (`Reports/`)

| ë¬¸ì„œ | ëª©ì  | ëŒ€ìƒ |
|------|------|------|
| **`Reports/DART_API_Optimization_Final_Report_v3.8.md`** | DART API ìµœì í™” ìƒì„¸ ë³´ê³  | ê°œë°œì, ì•„í‚¤í…íŠ¸ |
| **`Reports/RS_SCORE_IMPLEMENTATION_REPORT.md`** | RS ì ìˆ˜ ê³„ì‚° ê¸°ëŠ¥ êµ¬í˜„ | ê°œë°œì |
| **`Reports/report_test_simulation_architechture.md`** | SIMULATION v7 ê²€ì¦ ê²°ê³¼ | ê°œë°œì, QA |
| **`Reports/report_ê³¼ê±°ì‹¤í–‰ìë™íŠ¸ë¦¬ê±°.md`** | P2 ìŠ¤ì¼€ì¤„ë§ í•´ê²° ë³´ê³  | ê°œë°œì, DevOps |

### ğŸ”µ ì´ˆê¸° ì»¨í…ìŠ¤íŠ¸ ë¬¸ì„œ (ë£¨íŠ¸)

| ë¬¸ì„œ | ëª©ì  | ëŒ€ìƒ |
|------|------|------|
| **`initial_context_for_gemini_cli.md`** | Gemini AI ê°ë…ê´€ìš© ì»¨í…ìŠ¤íŠ¸ | AI í˜‘ì—… |
| **`initial_context_for_inspector.md`** | Inspector AIìš© ì»¨í…ìŠ¤íŠ¸ | AI í˜‘ì—… |

### ğŸŸ¢ DataPipeline ê¸°ìˆ  ë¬¸ì„œ (ì´ í´ë”)

| ë¬¸ì„œ | ëª©ì  |
|------|------|
| **`README.md`** (ì´ ë¬¸ì„œ) | ë¬¸ì„œ ì„¼í„° ë° ê°€ì´ë“œ |
| **`Reference/`** | ê°œë°œ ì°¸ì¡° ë¬¸ì„œ (ë””ë²„ê¹…, API ëª…ì„¸) |
| **`Reports/`** | Phase 5-7 ìµœì¢… ë³´ê³ ì„œ ëª¨ìŒ |
| **`Archive/Phase1-4/`** | Phase 1-4 ë³´ê´€ ë¬¸ì„œ |
| **`Archive/Plans/`** | Phase 5-7 ê³„íšì„œ ë° ì¤‘ê°„ ë¬¸ì„œ |

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. í”„ë¡œì íŠ¸ ì´í•´í•˜ê¸°

**ì²« ë°©ë¬¸ìë¼ë©´:**
```
1. DataPipeline_Project_Roadmap.md ì½ê¸°
   â†’ í”„ë¡œì íŠ¸ ì „ì²´ íë¦„ íŒŒì•…
   
2. "í˜„ì¬ ìƒíƒœ" ì„¹ì…˜ í™•ì¸
   â†’ ìµœì‹  ì™„ë£Œ ë§ˆì¼ìŠ¤í†¤ í™•ì¸
   
3. "Phase 1-7" ì„¹ì…˜ ì½ê¸°
   â†’ ê°œë°œ ê³¼ì • ì´í•´
```

**ê°œë°œìë¼ë©´:**
```
1. Reference/ í´ë” ë¨¼ì € í™•ì¸ â­
   â†’ Reference/debugging_commands.md (í•„ìˆ˜)
   â†’ Reference/kiwoom_restapi_specs.md (API ê°œë°œ ì‹œ)
   
2. Roadmap "ì•„í‚¤í…ì²˜" ì„¹ì…˜
   â†’ ì‹œìŠ¤í…œ êµ¬ì¡° íŒŒì•…
   
3. Reports/ í´ë”ì˜ ìµœì¢… ë³´ê³ ì„œ ì½ê¸°
   â†’ Reports/RS_SCORE_IMPLEMENTATION_REPORT.md
   â†’ Reports/DART_API_Optimization_Final_Report_v3.8.md
```

### 2. ë¡œì»¬ í™˜ê²½ ì„¤ì •

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
cd /home/jscho/ChartInsight-Studio/DataPipeline

# 2. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python3 -m venv venv
source venv/bin/activate

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local
# .env.local íŒŒì¼ í¸ì§‘ (API í‚¤, DB ì •ë³´)

# 5. Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker compose --env-file .env.docker --profile pipeline up -d

# 6. DB ì´ˆê¸°í™”
python src/database.py

# 7. Airflow ì›¹ UI ì ‘ì†
# http://localhost:8080 (admin/admin)
```

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Apache Airflow                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     DAG Orchestration               â”‚    â”‚
â”‚  â”‚                                     â”‚    â”‚
â”‚  â”‚  dag_initial_loader                 â”‚    â”‚
â”‚  â”‚  dag_daily_batch                    â”‚    â”‚
â”‚  â”‚  dag_sector_master_update           â”‚    â”‚
â”‚  â”‚  dag_financials_update              â”‚    â”‚
â”‚  â”‚  dag_live_collectors                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kiwoom API     â”‚   â”‚   DART API       â”‚
â”‚  (ì‹œì„¸ ë°ì´í„°)    â”‚   â”‚   (ì¬ë¬´ ë°ì´í„°)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PostgreSQL Database                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  live schema (ìš´ì˜ ë°ì´í„°)           â”‚    â”‚
â”‚  â”‚  simulation schema (ë°±í…ŒìŠ¤íŒ… ë°ì´í„°) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### 1. DAG (Directed Acyclic Graph)

| DAG | ì—­í•  | ìŠ¤ì¼€ì¤„ |
|-----|------|--------|
| **dag_initial_loader** | ì‹œìŠ¤í…œ ì´ˆê¸°í™”, ê³¼ê±° ë°ì´í„° ì ì¬ | ìˆ˜ë™ |
| **dag_daily_batch** | ë§¤ì¼ ì¦ë¶„ ì—…ë°ì´íŠ¸ ë° ë¶„ì„ | ë§¤ì¼ ì˜¤ì „ |
| **dag_sector_master_update** | ì—…ì¢… ë§ˆìŠ¤í„° ìˆ˜ì§‘ | ì£¼ê°„ |
| **dag_financials_update** | ì¬ë¬´ ë¶„ì„ (DART API) | ì£¼ê°„ |
| **dag_live_collectors** | ê³ ë¹ˆë„ ë¶„ë´‰ ë°ì´í„° ìˆ˜ì§‘ | 5ë¶„/30ë¶„/1ì‹œê°„ |

#### 2. ë¶„ì„ ëª¨ë“ˆ

```
src/analysis/
â”œâ”€â”€ rs_calculator.py        # ìƒëŒ€ê°•ë„ ê³„ì‚°
â”œâ”€â”€ financial_analyzer.py   # ì¬ë¬´ ë¶„ì„
â””â”€â”€ technical_analyzer.py   # ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
```

#### 3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```sql
-- LIVE ìŠ¤í‚¤ë§ˆ (ìš´ì˜)
live.stocks                     -- ì¢…ëª© ë§ˆìŠ¤í„°
live.sectors                    -- ì—…ì¢… ë§ˆìŠ¤í„°
live.candles                    -- OHLCV ë°ì´í„°
live.financial_analysis_results -- ì¬ë¬´ ë¶„ì„ ê²°ê³¼
live.daily_analysis_results     -- í†µí•© ë¶„ì„ ê²°ê³¼

-- SIMULATION ìŠ¤í‚¤ë§ˆ (ë°±í…ŒìŠ¤íŒ…)
simulation.candles              -- ê³¼ê±° ì‹œì  ìº”ë“¤ ìŠ¤ëƒ…ìƒ·
simulation.financial_analysis_results -- ê³¼ê±° ì‹œì  ì¬ë¬´ ìŠ¤ëƒ…ìƒ·
simulation.daily_analysis_results     -- ì‹œë®¬ë ˆì´ì…˜ ë¶„ì„ ê²°ê³¼
```

---

## ğŸ† ì£¼ìš” ì„±ê³¼

### Phase 1-4: ê¸°ë°˜ êµ¬ì¶• (2025-10-13 ~ 10-26)
- âœ… ë°ì´í„° ëª¨ë¸ ë° DAG ì•„í‚¤í…ì²˜ ì™„ì„±
- âœ… ì „ì²´ ë°°ì¹˜ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- âœ… ë°ì´í„° ë¬´ê²°ì„± ì´ìŠˆ í•´ê²° (ì¤‘ë³µ ì ì¬, Race Condition ë“±)

### Phase 5: RS ì ìˆ˜ ê³„ì‚° (2025-10-22)
- âœ… Market RS / Sector RS ê³„ì‚° ì—”ì§„ ì™„ì„±
- âœ… ì—…ì¢… ë§ˆìŠ¤í„° ìˆ˜ì§‘ ë° Fuzzy Matching ë§¤í•‘
- âœ… ì›”ë´‰ ê¸°ë°˜ ìƒëŒ€ê°•ë„ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„

### Phase 6: DART API ìµœì í™” (2025-10-26)
- âœ… API í˜¸ì¶œ **73% ì ˆê°** (42,000íšŒ â†’ 11,200íšŒ)
- âœ… ì¬ë¬´ ë¶„ì„ ì •í™•ë„ **100% ë‹¬ì„±**
- âœ… ì§€ëŠ¥í˜• ì¦ë¶„ ìˆ˜ì§‘ ì‹œìŠ¤í…œ êµ¬ì¶•

### Phase 7: SIMULATION v7 (2025-10-30)
- âœ… ì™„ì „í•œ ì—­í•  ë¶„ë¦¬ ì•„í‚¤í…ì²˜ (SRP ì™„ë²½ êµ¬í˜„)
- âœ… Look-Ahead Bias ì™„ì „ ì œê±°
- âœ… P2 ìŠ¤ì¼€ì¤„ë§ ì•ˆì •í™” (ê³¼ê±° ì‹¤í–‰ 99.7% ì ˆê°)
- âœ… End-to-End ê²€ì¦ ì™„ë£Œ

---

## ğŸ“– ê°œë°œ ì°¸ì¡° ë¬¸ì„œ

### Reference í´ë”

**ìœ„ì¹˜**: `DataPipeline/docs/Reference/`

**ëª©ì **: í˜„ì¬ ê°œë°œ ì¤‘ **ì§€ì†ì ìœ¼ë¡œ ì°¸ì¡°**í•´ì•¼ í•˜ëŠ” ê¸°ìˆ  ë¬¸ì„œ

```
Reference/
â”œâ”€â”€ README.md                    # Reference ê°€ì´ë“œ
â”œâ”€â”€ debugging_commands.md        # Docker/PostgreSQL/Airflow ëª…ë ¹ì–´
â””â”€â”€ kiwoom_restapi_specs.md      # Kiwoom API ëª…ì„¸ì„œ
```

### debugging_commands.md â­
**ì‚¬ìš© ë¹ˆë„**: ë§¤ì¼  
**ë‚´ìš©**: Docker, PostgreSQL, Airflow ë””ë²„ê¹… ëª…ë ¹ì–´ ë ˆí¼ëŸ°ìŠ¤

**í•µì‹¬ ëª…ë ¹ì–´**:
- DAG ìˆ˜ë™ íŠ¸ë¦¬ê±° (SIMULATION ëª¨ë“œ)
- PostgreSQL DB ì¡°íšŒ (ë¶„ì„ ê²°ê³¼ ê²€ì¦)
- Airflow ë¡œê·¸ í™•ì¸
- ì»¨í…Œì´ë„ˆ ê´€ë¦¬

**ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?**
- âœ… DAG í…ŒìŠ¤íŠ¸ í›„ ê²°ê³¼ í™•ì¸
- âœ… ë²„ê·¸ ë””ë²„ê¹…
- âœ… DB ë°ì´í„° ê²€ì¦
- âœ… ë¡œê·¸ ë¶„ì„

### kiwoom_restapi_specs.md
**ì‚¬ìš© ë¹ˆë„**: API ê°œë°œ ì‹œ  
**ë‚´ìš©**: Kiwoom REST API 6ê°œ ëª…ì„¸ ë° ì˜ˆì œ ì½”ë“œ

**í¬í•¨ API**:
- `ka10099`: ì¢…ëª©ì •ë³´ ë¦¬ìŠ¤íŠ¸ (í˜„ì¬ ì‚¬ìš© ì¤‘)
- `ka10101`: ì—…ì¢…ì½”ë“œ ë¦¬ìŠ¤íŠ¸ (í˜„ì¬ ì‚¬ìš© ì¤‘ - `dag_sector_master_update`)
- `ka10083`: ì£¼ì‹ ì›”ë´‰ (í˜„ì¬ ì‚¬ìš© ì¤‘ - RS ê³„ì‚°)
- `ka20008`: ì—…ì¢… ì›”ë´‰ (í˜„ì¬ ì‚¬ìš© ì¤‘ - Sector RS)
- `ka20007`: ì—…ì¢… ì£¼ë´‰ (í–¥í›„ ì‚¬ìš© ì˜ˆì •)
- `ka20006`: ì—…ì¢… ì¼ë´‰ (í–¥í›„ ì‚¬ìš© ì˜ˆì •)

**ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?**
- âœ… ì‹ ê·œ API ì¶”ê°€ ì‹œ
- âœ… API ì‘ë‹µ í˜•ì‹ í™•ì¸ ì‹œ
- âœ… RS ê³„ì‚° ë¡œì§ ê°œì„  ì‹œ
- âœ… í…Œë§ˆ ë¶„ì„ ê¸°ëŠ¥ ê°œë°œ ì‹œ (ê³¼ì œ 10)

**ë¹ ë¥¸ ì°¸ì¡°**:
- ë””ë²„ê¹… ì¤‘? â†’ `debugging_commands.md`
- API ê°œë°œ ì¤‘? â†’ `kiwoom_restapi_specs.md`

ìì„¸í•œ ë‚´ìš©ì€ `Reference/README.md`ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ğŸ“¦ ë³´ê´€ ë¬¸ì„œ

### Archive í´ë” êµ¬ì¡°

**ìœ„ì¹˜**: `DataPipeline/docs/Archive/`

```
Archive/
â”œâ”€â”€ Phase0-Genesis/     # ğŸŒ± í”„ë¡œì íŠ¸ íƒ„ìƒê¸° (2025-07)
â”‚   â”œâ”€â”€ README.md       # 30ê°œ ì¢…ëª© í”„ë¡œí† íƒ€ì… ìŠ¤í† ë¦¬
â”‚   â”œâ”€â”€ TradeSmartAI ì´ˆê¸° ì ì¬ ë³´ê³ ì„œ.md
â”‚   â””â”€â”€ TradeSmartAI ê°œë°œ ê³„íš Ver 4.0.md
â”‚
â”œâ”€â”€ Phase1-4/           # Phase 1-4 ê¸°ë°˜ êµ¬ì¶• ê¸°ê°„ ë¬¸ì„œ
â”‚   â”œâ”€â”€ README.md       # ìƒì„¸ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ DataPipeline_Upgrade_Plan.md
â”‚   â”œâ”€â”€ DataPipeline_Upgrade_Report.md
â”‚   â”œâ”€â”€ DataPipeline_Improvement_Plan.md
â”‚   â””â”€â”€ DataPipeline_Improvement_Points.md
â”‚
â””â”€â”€ Plans/              # Phase 5-7 ê³„íšì„œ ë° ì¤‘ê°„ ë¬¸ì„œ
    â”œâ”€â”€ README.md       # ìƒì„¸ ê°€ì´ë“œ
    â”œâ”€â”€ RS_SCORE_IMPLEMENTATION_PLAN.md
    â”œâ”€â”€ SIMULATION ëª¨ë“œ ì•„í‚¤í…ì²˜ ë™ê¸°í™” ê³„íšì„œ.md
    â”œâ”€â”€ SIMULATION_ì•„í‚¤í…ì²˜_ê·¼ë³¸ì _ì¬ê²€í† _ë³´ê³ ì„œ.md
    â””â”€â”€ p2_dag_scheduling_stability_report.md
```

### Archive/Phase0-Genesis/ ğŸŒ±
**ê¸°ê°„**: 2025-07  
**ë‚´ìš©**: í”„ë¡œì íŠ¸ íƒ„ìƒê¸° - 30ê°œ ì¢…ëª© í”„ë¡œí† íƒ€ì…

**í•µì‹¬ ë¬¸ì„œ**:
- `TradeSmartAI ì´ˆê¸° ì ì¬ ë³´ê³ ì„œ.md` - ì²« ë²ˆì§¸ ì„±ê³µ
- `TradeSmartAI ê°œë°œ ê³„íš Ver 4.0.md` - ì´ˆê¸° ì„¤ê³„

**í•™ìŠµ ê°€ì¹˜**:
- í”„ë¡œì íŠ¸ ì‹œì‘ ìŠ¤í† ë¦¬ (30ê°œ â†’ 1,400ê°œ ì„±ì¥)
- íƒ€ì„ì¡´ ì²˜ë¦¬ ë¬¸ì œì˜ ê·¼ë³¸ í•´ê²° ê³¼ì •
- ì‘ì€ ê²ƒì—ì„œ í° ê²ƒìœ¼ë¡œ ì„±ì¥í•˜ëŠ” ê³¼ì •

**âš ï¸ ì£¼ì˜**: í˜„ì¬ ì‹œìŠ¤í…œê³¼ ì™„ì „íˆ ë‹¤ë¦„!

### Archive/Phase1-4/
**ê¸°ê°„**: 2025-10-13 ~ 10-26  
**ë‚´ìš©**: Phase 1-4 ê¸°ë°˜ êµ¬ì¶• ê³¼ì •ì˜ ì™„ì „í•œ ê¸°ë¡

**í•µì‹¬ ë¬¸ì„œ**:
- `DataPipeline_Upgrade_Plan.md` - ì´ˆê¸° êµ¬ì¶• ê³„íš
- `DataPipeline_Upgrade_Report.md` - êµ¬í˜„ ê²€ì¦ ê²°ê³¼
- `DataPipeline_Improvement_Plan.md` - ê°œì„  ê³„íš
- `DataPipeline_Improvement_Points.md` - ë¬¸ì œì  ìƒì„¸ ë¶„ì„ â­

**í•™ìŠµ ê°€ì¹˜**:
- ì‹¤ì œ ë²„ê·¸ í•´ê²° ê³¼ì • (ë°ì´í„° ì¤‘ë³µ, Race Condition ë“±)
- ì•„í‚¤í…ì²˜ ì„¤ê³„ ì›ì¹™ (ë‹¨ì¼ ì±…ì„, ê´€ì‹¬ì‚¬ ë¶„ë¦¬)
- í˜‘ì—… ë°©ë²•ë¡  (Plan â†’ Report ë§¤í•‘)

### Archive/Plans/
**ê¸°ê°„**: 2025-10-21 ~ 10-31  
**ë‚´ìš©**: Phase 5-7 ê³„íšì„œ ë° ì¤‘ê°„ ê²€í†  ë¬¸ì„œ

**í•µì‹¬ ë¬¸ì„œ**:
- `SIMULATION ëª¨ë“œ ì•„í‚¤í…ì²˜ ë™ê¸°í™” ê³„íšì„œ.md` - v7 ì„¤ê³„ â­
- `p2_dag_scheduling_stability_report.md` - ìŠ¤ì¼€ì¤„ë§ ë¬¸ì œ í•´ê²°
- `SIMULATION_ì•„í‚¤í…ì²˜_ê·¼ë³¸ì _ì¬ê²€í† _ë³´ê³ ì„œ.md` - v6â†’v7 ì „í™˜ ë°°ê²½

**í•™ìŠµ ê°€ì¹˜**:
- ê³„íš â†’ ì‹¤í–‰ â†’ ë³€ê²½ ê³¼ì •
- ì•„í‚¤í…ì²˜ ì˜ì‚¬ê²°ì • ê³¼ì •
- ë¬¸ì œ ì ‘ê·¼ ë°©ë²•ë¡ 

**âš ï¸ ì£¼ì˜**: ë³´ê´€ ë¬¸ì„œëŠ” ê³¼ê±°/ì¤‘ê°„ ì‹œì ì˜ ê¸°ë¡ì…ë‹ˆë‹¤.
- **ìµœì‹  ì •ë³´** â†’ `DataPipeline_Project_Roadmap.md`
- **ìµœì¢… ê²°ê³¼** â†’ `Reports/` í´ë”

ìì„¸í•œ ë‚´ìš©ì€ ê° í´ë”ì˜ `README.md`ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### í•µì‹¬ ê¸°ìˆ 
- **Python 3.8+**: ì£¼ ê°œë°œ ì–¸ì–´
- **Apache Airflow**: ì›Œí¬í”Œë¡œìš° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- **PostgreSQL**: ë°ì´í„°ë² ì´ìŠ¤
- **Docker**: ì»¨í…Œì´ë„ˆí™”

### ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬
```python
# ë°ì´í„° ì²˜ë¦¬
pandas
numpy
pyarrow

# API ì—°ë™
requests
dart-fss

# ë°ì´í„°ë² ì´ìŠ¤
SQLAlchemy
psycopg2-binary

# Airflow
apache-airflow[postgres]

# ìœ í‹¸ë¦¬í‹°
python-dotenv
pendulum
fuzzywuzzy
```

### ì™¸ë¶€ API
- **í‚¤ì›€ì¦ê¶Œ REST API**: ì‹œì„¸ ë°ì´í„° (ì¼/ì£¼/ì›”ë´‰, ë¶„ë´‰)
- **DART API**: ê¸ˆìœµê°ë…ì› ì „ìê³µì‹œ (ì¬ë¬´ì œí‘œ)

---

## ğŸ“– ê°œë°œ ê°€ì´ë“œ

### ì½”ë“œ êµ¬ì¡°

```
DataPipeline/
â”œâ”€â”€ dags/                    # Airflow DAG ì •ì˜
â”‚   â”œâ”€â”€ dag_initial_loader.py
â”‚   â”œâ”€â”€ dag_daily_batch.py
â”‚   â”œâ”€â”€ dag_sector_master_update.py
â”‚   â”œâ”€â”€ dag_financials_update.py
â”‚   â””â”€â”€ dag_live_collectors.py
â”‚
â”œâ”€â”€ src/                     # í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ analysis/            # ë¶„ì„ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ rs_calculator.py
â”‚   â”‚   â”œâ”€â”€ financial_engine.py
â”‚   â”‚   â”œâ”€â”€ financial_analyzer.py
â”‚   â”‚   â””â”€â”€ technical_analyzer.py
â”‚   â”‚
â”‚   â”œâ”€â”€ kiwoom_api/          # í‚¤ì›€ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚
â”‚   â”œâ”€â”€ dart_api/            # DART API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ dart_corp_map.py
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ filters.py       # Filter Zero
â”‚   â”‚   â”œâ”€â”€ sector_mapper.py # Fuzzy Matching
â”‚   â”‚   â””â”€â”€ logging_kst.py   # KST ë¡œê¹…
â”‚   â”‚
â”‚   â”œâ”€â”€ database.py          # DB ëª¨ë¸ ë° ì„¸ì…˜
â”‚   â”œâ”€â”€ data_collector.py    # ë°ì´í„° ìˆ˜ì§‘
â”‚   â””â”€â”€ master_data_manager.py # ë§ˆìŠ¤í„° ê´€ë¦¬
â”‚
â”œâ”€â”€ tests/                   # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”œâ”€â”€ scripts/                 # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docs/                    # ë¬¸ì„œ (ì´ í´ë”)
â””â”€â”€ requirements.txt         # Python ì˜ì¡´ì„±
```

### ì£¼ìš” ì„¤ê³„ ì›ì¹™

#### 1. ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)
ê° ëª¨ë“ˆ, í•¨ìˆ˜, DAGëŠ” í•˜ë‚˜ì˜ ëª…í™•í•œ ì±…ì„ë§Œ ê°€ì§‘ë‹ˆë‹¤.

#### 2. ë©±ë“±ì„± (Idempotency)
ê°™ì€ ì‘ì—…ì„ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•´ë„ ê²°ê³¼ê°€ ë™ì¼í•©ë‹ˆë‹¤.

#### 3. ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- ë°ì´í„° ìˆ˜ì§‘ â‰  ë°ì´í„° ë¶„ì„
- ë™ê¸°í™” â‰  í•„í„°ë§
- LIVE â‰  SIMULATION

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ì´ìŠˆ

#### 1. DAG ì‹¤í–‰ ì‹¤íŒ¨
```bash
# ë¡œê·¸ í™•ì¸
docker logs airflow-scheduler

# DB ì—°ê²° í™•ì¸
docker exec -it postgres-tradesmart psql -U postgres -d tradesmart_db
```

#### 2. API í˜¸ì¶œ í•œë„ ì´ˆê³¼
- DART API: 20,000íšŒ/ì¼
- í‚¤ì›€ API: ì´ˆë‹¹ 20íšŒ ì œí•œ
- í•´ê²°: ì§€ëŠ¥í˜• ì¦ë¶„ ìˆ˜ì§‘ ì‹œìŠ¤í…œ í™œìš©

#### 3. íƒ€ì„ì¡´ ì´ìŠˆ
- ëª¨ë“  ë‚ ì§œ/ì‹œê°„ì€ `Asia/Seoul` íƒ€ì„ì¡´ ì‚¬ìš©
- `pendulum` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì¼ê´€ì„± ë³´ì¥

### ë””ë²„ê¹… íŒ

```python
# 1. ì†Œìˆ˜ ì¢…ëª©ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
target_stock_codes = "005930,000660"  # ì‚¼ì„±ì „ì, SKí•˜ì´ë‹‰ìŠ¤ë§Œ

# 2. SIMULATION ëª¨ë“œë¡œ ì•ˆì „ í…ŒìŠ¤íŠ¸
execution_mode = "SIMULATION"

# 3. ë¡œê·¸ ë ˆë²¨ ì¡°ì •
import logging
logging.basicConfig(level=logging.DEBUG)
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸

### ìœ ìš©í•œ ì¿¼ë¦¬

```sql
-- 1. ë¶„ì„ ê²°ê³¼ ìµœì‹  ë°ì´í„° í™•ì¸
SELECT 
    stock_code,
    market_rs_score,
    sector_rs_score,
    financial_grade,
    analysis_date
FROM live.daily_analysis_results
WHERE analysis_date = (SELECT MAX(analysis_date) FROM live.daily_analysis_results)
ORDER BY market_rs_score DESC
LIMIT 10;

-- 2. ì¬ë¬´ ë¶„ì„ ìƒíƒœ í™•ì¸
SELECT 
    COUNT(*) as total_analyzed,
    COUNT(DISTINCT stock_code) as unique_stocks,
    MAX(analysis_date) as latest_date
FROM live.financial_analysis_results;

-- 3. ìº”ë“¤ ë°ì´í„° ì ì¬ í˜„í™©
SELECT 
    timeframe,
    COUNT(*) as candle_count,
    COUNT(DISTINCT stock_code) as stock_count
FROM live.candles
GROUP BY timeframe;

-- 4. SIMULATION ìŠ¤ëƒ…ìƒ· í™•ì¸
SELECT 
    'candles' as table_name,
    COUNT(*) as record_count
FROM simulation.candles
UNION ALL
SELECT 
    'financial_analysis_results',
    COUNT(*)
FROM simulation.financial_analysis_results
UNION ALL
SELECT 
    'daily_analysis_results',
    COUNT(*)
FROM simulation.daily_analysis_results;
```

---

## ğŸ“ í•™ìŠµ ë¦¬ì†ŒìŠ¤

### ì´ˆë³´ìë¥¼ ìœ„í•œ í•™ìŠµ ìˆœì„œ

#### 1ì£¼ì°¨: í”„ë¡œì íŠ¸ ì´í•´
- `DataPipeline_Project_Roadmap.md` ì „ì²´ ì½ê¸°
- "í”„ë¡œì íŠ¸ ê°œìš”", "í˜„ì¬ ìƒíƒœ" ì„¹ì…˜ ì§‘ì¤‘

#### 2ì£¼ì°¨: ê¸°ë°˜ ì§€ì‹
- `Archive/Phase1-4/DataPipeline_Upgrade_Plan.md` - Phase 1-4 ê³„íš
- Airflow ê¸°ë³¸ ê°œë… í•™ìŠµ (DAG, Task, XCom)

#### 3ì£¼ì°¨: í•µì‹¬ ê¸°ëŠ¥
- `Reports/RS_SCORE_IMPLEMENTATION_REPORT.md` - RS ê³„ì‚° ë¡œì§
- `Reports/DART_API_Optimization_Final_Report_v3.8.md` - API ìµœì í™”

#### 4ì£¼ì°¨: ê³ ê¸‰ ì£¼ì œ
- `Reports/report_test_simulation_architechture.md` - SIMULATION ëª¨ë“œ
- `Archive/Phase1-4/DataPipeline_Improvement_Points.md` - ë¬¸ì œ í•´ê²° ì‚¬ë¡€

### ê°œë°œìë¥¼ ìœ„í•œ ì°¸ê³  ìë£Œ

- **ì•„í‚¤í…ì²˜ íŒ¨í„´**: Roadmap v2.0 "ì£¼ìš” ê¸°ìˆ ì  ì„±ê³¼"
- **ë²„ê·¸ í•´ê²° ì‚¬ë¡€**: Archive/Phase1-4/DataPipeline_Improvement_Points.md
- **API ìµœì í™”**: Reports/DART_API_Optimization_Final_Report_v3.8.md
- **í…ŒìŠ¤íŠ¸ ì „ëµ**: Reports/report_test_simulation_architechture.md

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### 3-AI í˜‘ì—… ëª¨ë¸

ì´ í”„ë¡œì íŠ¸ëŠ” ë…íŠ¹í•œ í˜‘ì—… ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **Gemini CLI (ê°ë…ê´€)**: ê³ ìˆ˜ì¤€ ì„¤ê³„, ì „ëµì  ì˜ì‚¬ê²°ì •
2. **Cursor.ai Developer (ê°œë°œì)**: ìƒì„¸ êµ¬í˜„, ì½”ë“œ ì‘ì„±
3. **Cursor.ai Inspector (ê²€ìˆ˜ì)**: ì½”ë“œ ë¦¬ë·°, ë¬¸ì œì  ë°œê²¬

### ë¬¸ì„œ ì‘ì„± ì›ì¹™

1. **ê°œë°œ ì´ˆë³´ìë„ ì´í•´ ê°€ëŠ¥í•˜ê²Œ**
2. **ììƒí•˜ê³  ì„¤ëª…ì ì¸ ë°©ì‹**
3. **í•™ìŠµ ëª©ì ì— ë¶€í•©**
4. **Why â†’ What â†’ How ìˆœì„œ**

---

## ğŸ“ ì—°ë½ì²˜ ë° ì§€ì›

### í”„ë¡œì íŠ¸ ì •ë³´
- **í”„ë¡œì íŠ¸ëª…**: ChartInsight Studio DataPipeline
- **ë²„ì „**: v7.1
- **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-31

### ë¬¸ì„œ ê´€ë¦¬
- **ë¬¸ì„œ ê´€ë¦¬ì**: cursor.ai Documentation Manager
- **ìµœì¢… ê²€ìˆ˜**: cursor.ai Inspector

---

**ì´ ë¬¸ì„œëŠ” DataPipeline í”„ë¡œì íŠ¸ì˜ ì¤‘ì•™ ë¬¸ì„œ í—ˆë¸Œì…ë‹ˆë‹¤.  
ê¶ê¸ˆí•œ ë‚´ìš©ì´ ìˆë‹¤ë©´ ìœ„ Navigationì„ í™œìš©í•˜ì—¬ ê´€ë ¨ ë¬¸ì„œë¥¼ ì°¾ì•„ë³´ì„¸ìš”!** ğŸš€
